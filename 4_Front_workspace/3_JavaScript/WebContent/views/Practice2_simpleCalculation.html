<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>간단 계산기</title>
<style>
    table div {
        width: 100%;
        height: 30px;
    }
    table button {
        width: 100%;
        height: 100%;
    }
</style>
</head>
<body>
    <h2>Practice2</h2>
    <br>

    <input type="number" id="num1" value="0">
    <select name="cal" id="cal">
        <option value="+">+</option>
        <option value="-">-</option>
        <option value="*">*</option>
        <option value="/">/</option>
         <option value="%">%</option>
    </select>
    <input type="number" id="num2" value="0">
    <button onclick="calculate();">=</button>
    <input type="text" id="result" readonly>

    <script>
        function calculate() {
            var num1 = Number(document.getElementById("num1").value);
            var num2 = Number(document.getElementById("num2").value);
            var op = document.getElementById("cal").value;
            var result = document.getElementById("result");
            var value = 0;

            result.style.backgroundColor = "white";
            result.style.color = "black";
            
            switch(op) {
                case '+':
                    value = num1 + num2;
                    break;
                case '-':
                    value = num1 - num2;
                    break;
                case '*':
                    value = num1 * num2;
                    break;
                case '/':
                    value = num1 / num2;
                    break;
                case '%':
                    value = num1 % num2;
                    break;
            }

            if(isNaN(value)) {
                value = "연산불가";
                result.style.backgroundColor = "red";
                result.style.color = "white";
            }

            result.value = value;
        }
    </script>

    <h2>Practice2-2</h2>
    <br>

    <table border="1px">
        <tr>
            <td colspan="4"><div id="view"></div></td>
        </tr>
        <tr>
            <td><button id="C" value="C">C</button></td>
            <td><button id="bs" value="bs">bs</button></td>
            <td><button id="%" value="%">%</button></td>
            <td><button id="/" value="/">/</button></td>
        </tr>
        <tr>
            <td><button id="7" value="7">7</button></td>
            <td><button id="8" value="8">8</button></td>
            <td><button id="9" value="9">9</button></td>
            <td><button id="X" value="X">X</button></td>
        </tr>
        <tr>
            <td><button id="4" value="4">4</button></td>
            <td><button id="5" value="5">5</button></td>
            <td><button id="6" value="6">6</button></td>
            <td><button id="-" value="-">-</button></td>
        </tr>
        <tr>
            <td><button id="1" value="1">1</button></td>
            <td><button id="2" value="2">2</button></td>
            <td><button id="3" value="3">3</button></td>
            <td><button id="+" value="+">+</button></td>
        </tr>
        <tr>
            <td colspan="2"><button id="0" value="0">0</button></td>
            <td><button id="." value=".">.</button></td>
            <td><button id="=" value="=">=</button></td>
        </tr>
    </table>

    <script>
        var view = document.getElementById("view");

        var C = document.getElementById('C');
        var bs = document.getElementById('bs');
        var mod = document.getElementById('%');
        var div = document.getElementById('/');

        var j = document.getElementById('7');
        var i = document.getElementById('8');
        var h = document.getElementById('9');
        var mul = document.getElementById('X');

        var g = document.getElementById('4');
        var f = document.getElementById('5');
        var e = document.getElementById('6');
        var sub = document.getElementById('-');

        var d = document.getElementById('1');
        var c = document.getElementById('2');
        var b = document.getElementById('3');
        var add = document.getElementById('+');

        var a = document.getElementById('0');
        var dot = document.getElementById('.');
        var res = document.getElementById('=');
       
        C.onclick = function() {
            view.innerHTML = "";
        }

        bs.onclick = function() {
            view.innerHTML = view.innerHTML.slice(0, view.innerHTML.length - 1);
        }

        a.onclick = function() { numClick(this); };
        b.onclick = function() { numClick(this); };
        c.onclick = function() { numClick(this); };
        d.onclick = function() { numClick(this); };
        e.onclick = function() { numClick(this); };
        f.onclick = function() { numClick(this); };
        g.onclick = function() { numClick(this); };
        h.onclick = function() { numClick(this); };
        i.onclick = function() { numClick(this); };
        j.onclick = function() { numClick(this); };

        add.onclick = function() { opClick(this); };
        sub.onclick = function() { opClick(this); };
        mul.onclick = function() { opClick(this); };
        div.onclick = function() { opClick(this); };
        mod.onclick = function() { opClick(this); };

        function numClick(button) {
            var v = view.innerHTML;
            if(v.length == 0 || Number(v) != 0 || v.indexOf('.') != -1) {
               view.innerHTML += button.value;
            }
        }

        function opClick(button) {
            var v = view.innerHTML;
            if(v.length != 0 && Number(v) != 0 && v.indexOf(button.value) == -1) {
                view.innerHTML += button.value;
            }
        }

        dot.onclick = function() {
            var v = view.innerHTML;
            if(v.length != 0 && v.indexOf(this.value) == -1) {
                view.innerHTML += this.value;
            } else if(v.indexOf('+') != -1 || v.indexOf('-') != -1 || v.indexOf('X') != -1 || v.indexOf('/') != -1 || v.indexOf('%') != -1) {
                if(v.split('.').length - 1 == 1) {
                    view.innerHTML += this.value;
                }
            }
        }

        res.onclick = function() {
            var v = view.innerHTML;
            var num;
            var r = 0;

            if(v.indexOf('+') != -1) {
                num = v.split('+');
                r = Number(num[0]) + Number(num[1]);
            } else if(v.indexOf('-') != -1) {
                 num = v.split('-');
                 r = Number(num[0]) - Number(num[1]);
            } else if(v.indexOf('X') != -1) {
                 num = v.split('X');
                 r = Number(num[0]) * Number(num[1]);
            } else if(v.indexOf('/') != -1) {
                 num = v.split('/');
                 r = Number(num[0]) / Number(num[1]);
            } else if(v.indexOf('%') != -1) {
                 num = v.split('%');
                 r = Number(num[0]) % Number(num[1]);
            }

            if(typeof(num) != "undefined") {
                view.innerHTML = r;
            }
            
        }
        

    </script>

</body>
</html>